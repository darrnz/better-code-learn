<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Programming Exercises Test Runner</title>
</head>
<body>
  <h1>Select Subject to Run Tests</h1>

  <!-- Dropdown to select the subject -->
  <select id="subjectSelector">
    <option value="">-- Select a subject --</option>
    <option value="big-O-complexity">Big O Complexity</option>
    <option value="DataStructures/LinkedList">Data Structures - Linked List</option>
    <option value="DataStructures/Trees">Data Structures - Trees</option>
    <!-- Add more options for other subjects here -->
  </select>

  <button id="runTestsButton">Run Tests</button>

  <!-- Div to display the test results -->
  <div id="test-results"></div>

  <script type="module">
    document.getElementById('runTestsButton').addEventListener('click', async function () {
      const subject = document.getElementById('subjectSelector').value;

      if (!subject) {
        alert('Please select a subject!');
        return;
      }

      const testResultsDiv = document.getElementById('test-results');
      testResultsDiv.innerHTML = '';  // Clear previous results

      // Dynamically load the exercise and test files for the selected subject
      try {
        // Import the test file as a module
        const { runTests } = await import(`./dist/${subject}/exercises.test.js`);
        
        // Run the tests and display the results
        const results = runTests();
        displayResults(results);
      } catch (error) {
        testResultsDiv.innerHTML = 'Failed to load the test file: ' + error.message;
      }
    });

    // Function to display test results
    function displayResults(results) {
      const testResultsDiv = document.getElementById('test-results');
      results.forEach(result => {
        const resultDiv = document.createElement('div');
        resultDiv.style.color = result.passed ? 'green' : 'red';
        resultDiv.innerHTML = result.passed
          ? `✅ ${result.description}`
          : `❌ ${result.description} - ${result.error.message}`;
        testResultsDiv.appendChild(resultDiv);
      });
    }
  </script>
</body>
</html>
